---
  - name: Initial setup
    hosts: all
    roles:
      - init
    tags: i


  - name: DNS Servers
    hosts: dns_servers
    roles:
      - bind
    tags: dns


  - name: Resolve
    hosts: all
    roles:
      - resolver
    tags: r


  - name: Web Servers
    hosts: web_servers
    roles:
      - docker
      - agama
      - nginx
    tags: mx

  - name: Database server
    hosts: db_servers
    roles:
      - mysql
    tags: mx

  - name: Prometheus Server
    hosts: prometheus_servers
    roles:
      - prometheus
      - nginx
    tags: p


  - name: Grafana server
    hosts: grafana_servers
    roles:
      - docker
      - grafana
    tags: g

  - name: Loki server
    hosts: loki_servers
    roles:
      - loki
    tags: l

  - name: Promtail server
    hosts: promtail_servers
    roles:
      - promtail
    tags: pt

  - name: Haproxy
    hosts: haproxy
    roles:
      - haproxy
    tags: ha

  - name: Keepalived
    hosts: keepalived
    roles:
      - keepalived
    tags: k
